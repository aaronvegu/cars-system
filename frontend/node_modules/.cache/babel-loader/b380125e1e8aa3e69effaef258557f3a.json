{"ast":null,"code":"import _slicedToArray from \"/Users/aaronvegu/code/microservices/cars-system/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/aaronvegu/code/microservices/cars-system/frontend/src/routes/CRUD.jsx\";\nimport React, { useState, useEffect } from 'react';\nimport { Button, Container, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, Fab } from '@mui/material';\nimport AddIcon from '@mui/icons-material/Add';\nimport CarList from './CarList';\nimport CarEdit from './CarEdit';\nimport axios from 'axios';\nfunction CRUD() {\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    cars = _useState2[0],\n    setCars = _useState2[1]; // Initialize with your cars data\n  var _useState3 = useState(false),\n    _useState4 = _slicedToArray(_useState3, 2),\n    editDialogOpen = _useState4[0],\n    setEditDialogOpen = _useState4[1];\n  var _useState5 = useState({\n      make: '',\n      model: '',\n      year: '',\n      price: ''\n    }),\n    _useState6 = _slicedToArray(_useState5, 2),\n    editCar = _useState6[0],\n    setEditCar = _useState6[1];\n  var _useState7 = useState(null),\n    _useState8 = _slicedToArray(_useState7, 2),\n    selectedImage = _useState8[0],\n    setSelectedImage = _useState8[1]; // State for selected image\n  // Define a function to fetch cars from the backend\n  var fetchCars = function fetchCars() {\n    axios.get('http://localhost:3001/api/cars') // Adjust the URL to match your backend route\n    .then(function (response) {\n      setCars(response.data);\n    }).catch(function (error) {\n      console.error('Error fetching cars:', error);\n    });\n  };\n  useEffect(function () {\n    // Fetch cars from the backend when the component mounts\n    fetchCars();\n  }, []);\n  useEffect(function () {\n    // Fetch cars from the backend when the component mounts\n    axios.get('http://localhost:3001/api/cars') // Adjust the URL to match your backend route\n    .then(function (response) {\n      setCars(response.data);\n    }).catch(function (error) {\n      console.error('Error fetching cars:', error);\n    });\n  }, []);\n  var handleEdit = function handleEdit(carId) {\n    var carToEdit = cars.find(function (car) {\n      return car.id === carId;\n    });\n    setEditCar(carToEdit);\n    setEditDialogOpen(true);\n  };\n  var handleDelete = function handleDelete(carId) {\n    var updatedCars = cars.filter(function (car) {\n      return car.id !== carId;\n    });\n    setCars(updatedCars);\n  };\n  var handleAddNew = function handleAddNew() {\n    setEditCar(null);\n    setEditDialogOpen(true);\n  };\n  var handleEditDialogClose = function handleEditDialogClose() {\n    setEditDialogOpen(false);\n  };\n  var handleImageChange = function handleImageChange(event) {\n    var file = event.target.files[0];\n    setSelectedImage(file);\n  };\n  var handleSaveCar = function handleSaveCar() {\n    // Create a FormData object to send image and other data to the backend\n    var formData = new FormData();\n    formData.append('image', selectedImage); // 'image' should match your backend's file field name\n    formData.append('make', editCar.make);\n    formData.append('model', editCar.model);\n    formData.append('year', editCar.year);\n    formData.append('price', editCar.price);\n\n    // Send the FormData object to the backend\n    axios.post('http://localhost:3001/api/cars/create', formData) // Adjust the URL to match your backend route\n    .then(function (response) {\n      // Handle successful response (e.g., update state)\n      // Close the dialog and reset state as needed\n      setEditDialogOpen(false);\n      setEditCar(null);\n      setSelectedImage(null); // Clear the selected image\n      fetchCars(); // Fetch updated car list\n    }).catch(function (error) {\n      console.error('Error saving car:', error);\n      // Handle errors as needed\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"outlined\",\n    color: \"primary\",\n    onClick: handleAddNew,\n    startIcon: /*#__PURE__*/React.createElement(AddIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 20\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }\n  }, \"Agregar Auto\"), /*#__PURE__*/React.createElement(CarList, {\n    cars: cars,\n    onEdit: handleEdit,\n    onDelete: handleDelete,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Dialog, {\n    open: editDialogOpen,\n    onClose: handleEditDialogClose,\n    maxWidth: \"sm\",\n    fullWidth: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(DialogTitle, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 9\n    }\n  }, editCar ? 'Editar' : 'Agregar nuevo auto'), /*#__PURE__*/React.createElement(DialogContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(CarEdit, {\n    car: editCar || {},\n    onSave: handleSaveCar,\n    onCancel: handleEditDialogClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 11\n    }\n  }))));\n}\nexport default CRUD;","map":{"version":3,"names":["React","useState","useEffect","Button","Container","Dialog","DialogActions","DialogContent","DialogContentText","DialogTitle","Fab","AddIcon","CarList","CarEdit","axios","CRUD","_useState","_useState2","_slicedToArray","cars","setCars","_useState3","_useState4","editDialogOpen","setEditDialogOpen","_useState5","make","model","year","price","_useState6","editCar","setEditCar","_useState7","_useState8","selectedImage","setSelectedImage","fetchCars","get","then","response","data","catch","error","console","handleEdit","carId","carToEdit","find","car","id","handleDelete","updatedCars","filter","handleAddNew","handleEditDialogClose","handleImageChange","event","file","target","files","handleSaveCar","formData","FormData","append","post","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","variant","color","onClick","startIcon","onEdit","onDelete","open","onClose","maxWidth","fullWidth","onSave","onCancel"],"sources":["/Users/aaronvegu/code/microservices/cars-system/frontend/src/routes/CRUD.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport {\n  Button,\n  Container,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n  Fab,\n} from '@mui/material';\nimport AddIcon from '@mui/icons-material/Add';\nimport CarList from './CarList';\nimport CarEdit from './CarEdit';\n\nimport axios from 'axios';\n\nfunction CRUD() {\n  const [cars, setCars] = useState([]); // Initialize with your cars data\n  const [editDialogOpen, setEditDialogOpen] = useState(false);\n  const [editCar, setEditCar] = useState({\n    make: '',\n    model: '',\n    year: '',\n    price: '',\n  });\n  const [selectedImage, setSelectedImage] = useState(null); // State for selected image\n\n  // Define a function to fetch cars from the backend\n  const fetchCars = () => {\n    axios\n      .get('http://localhost:3001/api/cars') // Adjust the URL to match your backend route\n      .then((response) => {\n        setCars(response.data);\n      })\n      .catch((error) => {\n        console.error('Error fetching cars:', error);\n      });\n  };\n\n  useEffect(() => {\n    // Fetch cars from the backend when the component mounts\n    fetchCars();\n  }, []);\n\n  useEffect(() => {\n    // Fetch cars from the backend when the component mounts\n    axios\n      .get('http://localhost:3001/api/cars') // Adjust the URL to match your backend route\n      .then((response) => {\n        setCars(response.data);\n      })\n      .catch((error) => {\n        console.error('Error fetching cars:', error);\n      });\n  }, []);\n\n  const handleEdit = (carId) => {\n    const carToEdit = cars.find((car) => car.id === carId);\n    setEditCar(carToEdit);\n    setEditDialogOpen(true);\n  };\n\n  const handleDelete = (carId) => {\n    const updatedCars = cars.filter((car) => car.id !== carId);\n    setCars(updatedCars);\n  };\n\n  const handleAddNew = () => {\n    setEditCar(null);\n    setEditDialogOpen(true);\n  };\n\n  const handleEditDialogClose = () => {\n    setEditDialogOpen(false);\n  };\n\n  const handleImageChange = (event) => {\n    const file = event.target.files[0];\n    setSelectedImage(file);\n  };\n\n  const handleSaveCar = () => {\n    // Create a FormData object to send image and other data to the backend\n    const formData = new FormData();\n    formData.append('image', selectedImage); // 'image' should match your backend's file field name\n    formData.append('make', editCar.make);\n    formData.append('model', editCar.model);\n    formData.append('year', editCar.year);\n    formData.append('price', editCar.price);\n\n    // Send the FormData object to the backend\n    axios\n      .post('http://localhost:3001/api/cars/create', formData) // Adjust the URL to match your backend route\n      .then((response) => {\n        // Handle successful response (e.g., update state)\n        // Close the dialog and reset state as needed\n        setEditDialogOpen(false);\n        setEditCar(null);\n        setSelectedImage(null); // Clear the selected image\n        fetchCars(); // Fetch updated car list\n      })\n      .catch((error) => {\n        console.error('Error saving car:', error);\n        // Handle errors as needed\n      });\n  };\n\n  return (\n    <Container>\n      <Button\n        variant='outlined'\n        color='primary'\n        onClick={handleAddNew}\n        startIcon={<AddIcon />}\n      >\n        Agregar Auto\n      </Button>\n      <CarList cars={cars} onEdit={handleEdit} onDelete={handleDelete} />\n      <Dialog\n        open={editDialogOpen}\n        onClose={handleEditDialogClose}\n        maxWidth='sm'\n        fullWidth\n      >\n        <DialogTitle>{editCar ? 'Editar' : 'Agregar nuevo auto'}</DialogTitle>\n        <DialogContent>\n          <CarEdit\n            car={editCar || {}}\n            onSave={handleSaveCar}\n            onCancel={handleEditDialogClose}\n          />\n        </DialogContent>\n      </Dialog>\n    </Container>\n  );\n}\n\nexport default CRUD;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}